<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Almazara - Tienda Online</title>
    
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Fuentes -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- 3. Configuración de Tailwind -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              serif: ['"Playfair Display"', 'serif'],
              sans: ['"Lato"', 'sans-serif'],
            },
            colors: {
              olive: {
                50: '#f4f7ec',
                100: '#e3ebd3',
                500: '#6b8e23',
                700: '#4a6318',
                900: '#3a4a1f',
              },
              stone: {
                50: '#fafaf9',
                100: '#f5f5f4',
                200: '#e7e5e4',
                300: '#d6d3d1',
                400: '#a8a29e',
                500: '#78716c',
                600: '#57534e',
                700: '#44403c',
                800: '#292524',
                850: '#2d2d2a',
                900: '#1c1917',
              },
              cream: {
                50: '#fdfbf7',
                100: '#f7f3e8',
              }
            }
          }
        }
      }
    </script>
    <style>
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      .font-playfair { font-family: 'Playfair Display', serif; }
    </style>

    <!-- 4. React y ReactDOM (Versión de Desarrollo para ver errores, en prod usar .production.min.js) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- 5. Babel para traducir JSX en el navegador -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 6. Lucide Icons (Versión UMD) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
<script type="importmap">
{
  "imports": {
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.555.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.31.0",
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "react": "https://aistudiocdn.com/react@^19.2.1"
  }
}
</script>
</head>
<body class="bg-cream-50 text-stone-850 antialiased selection:bg-olive-100 selection:text-olive-900">
    <div id="root"></div>

    <!-- AQUÍ EMPIEZA LA APP REACT -->
    <script type="text/babel">
        // Accedemos a las librerías globales
        const { useState, useEffect } = React;
        const { TreeDeciduous, ShoppingBag, Plus, Minus, X, Trash2, Phone, ChevronDown } = LucideReact;

        // --- CONSTANTES ---
        const WHATSAPP_NUMBER = "5491167474299";
        
        const PRODUCTS = [
          {
            id: '1',
            title: 'Aceite de Oliva López 500 ML',
            price: 13995.00,
            // IMPORTANTE: Cuando subas esto a GitHub, asegúrate de subir la foto 'lopez-500.jpg' 
            // en la misma carpeta. Si no la subes, usa la URL de ejemplo comentada abajo.
            image: './lopez-500.jpg', 
            // image: 'https://d3ugyf2ht6aenh.cloudfront.net/stores/001/150/681/products/lata-500-cc1-039c445694a97753e815886866632420-1024-1024.jpg',
            description: 'Virgen Extra. Sabor frutado medio. Clásico de Bodegas López.'
          },
          {
            id: '2',
            title: 'Aceite de Oliva López 1 Litro',
            price: 23995.00,
            image: './lopez-1000.jpg',
            // image: 'https://d3ugyf2ht6aenh.cloudfront.net/stores/001/653/337/products/aceite-oliva-lopez-1lt1-f09b52a44d039f60f816191851167431-640-0.jpg',
            description: 'La mejor relación precio-calidad. Lata clásica de 1 litro.'
          },
          {
            id: '3',
            title: 'Aceite de Trufa Negra',
            price: 35000.00,
            image: 'https://images.unsplash.com/photo-1620916297397-a4a5402a3c6c?q=80&w=1000&auto=format&fit=crop',
            description: 'Gourmet. Intenso aroma para finalizar platos.'
          }
        ];

        // --- COMPONENTES ---

        // 1. Header Component
        const Header = ({ cartCount, onOpenCart }) => {
          const [scrolled, setScrolled] = useState(false);

          useEffect(() => {
            const handleScroll = () => {
              setScrolled(window.scrollY > 20);
            };
            window.addEventListener('scroll', handleScroll);
            return () => window.removeEventListener('scroll', handleScroll);
          }, []);

          return (
            <div className={`w-full fixed top-0 z-40 transition-all duration-500 ease-in-out ${
                scrolled 
                  ? 'bg-white/95 backdrop-blur-md shadow-sm py-3 border-b border-stone-100' 
                  : 'bg-transparent py-6'
              }`}>
              <div className="container mx-auto px-6 flex justify-between items-center relative">
                <div className="w-10"></div> {/* Spacer */}

                <div className="flex flex-col items-center justify-center">
                  <div className="flex items-center gap-2">
                    <TreeDeciduous 
                      size={28} 
                      className={`transition-colors duration-300 ${scrolled ? 'text-olive-700' : 'text-stone-850'}`} 
                      strokeWidth={1.2} 
                    />
                    <h1 className="text-2xl font-serif tracking-[0.2em] font-bold text-stone-850">
                      ALMAZARA
                    </h1>
                  </div>
                  <div className={`h-[1px] bg-olive-500 transition-all duration-500 mt-1 ${scrolled ? 'w-0' : 'w-16'}`}></div>
                </div>

                <button 
                  onClick={onOpenCart}
                  className="relative group w-10 h-10 flex items-center justify-center"
                >
                  <ShoppingBag 
                    size={24} 
                    className={`transition-colors duration-300 ${scrolled ? 'text-stone-800' : 'text-stone-800'}`}
                    strokeWidth={1.5}
                  />
                  {cartCount > 0 && (
                    <span className="absolute -top-1 -right-1 bg-olive-600 text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full shadow-md animate-bounce">
                      {cartCount}
                    </span>
                  )}
                </button>
              </div>
            </div>
          );
        };

        // 2. ProductCard Component
        const ProductCard = ({ product, onAddToCart }) => {
          const formattedPrice = new Intl.NumberFormat('es-AR', {
            style: 'currency',
            currency: 'ARS',
            minimumFractionDigits: 0
          }).format(product.price);

          return (
            <div className="group cursor-default flex flex-col h-full">
              <div className="relative overflow-hidden aspect-[3/4] mb-6 shadow-lg border border-stone-200 transition-all duration-300 group-hover:shadow-xl group-hover:border-olive-300 bg-white p-4">
                <div className="absolute inset-0 bg-stone-900/0 group-hover:bg-stone-900/5 transition-colors duration-500 z-10" />
                <img 
                  src={product.image} 
                  alt={product.title} 
                  className="w-full h-full object-contain object-center group-hover:scale-110 transition-transform duration-1000 ease-in-out"
                  onError={(e) => {
                    e.target.onerror = null; 
                    e.target.src = 'https://via.placeholder.com/400x500?text=Imagen+No+Disponible'
                  }}
                />
                <button 
                  onClick={() => onAddToCart(product)}
                  className="absolute bottom-4 right-4 z-20 bg-stone-900 text-white p-3 rounded-full shadow-lg translate-y-20 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300 hover:bg-olive-700"
                  title="Agregar al carrito"
                >
                  <Plus size={20} />
                </button>
              </div>
              
              <div className="text-center px-4 flex-1 flex flex-col">
                <h3 className="text-xl font-serif font-semibold tracking-wide text-stone-900 leading-tight mb-3 group-hover:text-olive-800 transition-colors">
                  {product.title}
                </h3>
                <div className="w-10 h-[2px] bg-olive-300 mx-auto mb-4"></div>
                <p className="text-base text-stone-600 font-sans font-normal mb-5 leading-relaxed flex-1">
                    {product.description}
                </p>
                <div className="mt-auto">
                  <p className="text-2xl font-serif font-bold text-stone-900 mb-5">
                    {formattedPrice}
                  </p>
                  <button 
                    onClick={() => onAddToCart(product)}
                    className="w-full border-2 border-stone-300 hover:border-olive-700 text-stone-700 hover:text-olive-800 uppercase text-xs tracking-[0.2em] py-3 transition-all duration-300 font-bold hover:bg-white"
                  >
                    Agregar al Carrito
                  </button>
                </div>
              </div>
            </div>
          );
        };

        // 3. Main App Component
        const App = () => {
          const [cart, setCart] = useState([]);
          const [isCartOpen, setIsCartOpen] = useState(false);
          const [customerName, setCustomerName] = useState('');

          const addToCart = (product) => {
            setCart(prev => {
              const existing = prev.find(item => item.id === product.id);
              if (existing) {
                return prev.map(item => 
                  item.id === product.id ? { ...item, quantity: item.quantity + 1 } : item
                );
              }
              return [...prev, { ...product, quantity: 1 }];
            });
            setIsCartOpen(true);
          };

          const removeFromCart = (id) => {
            setCart(prev => prev.filter(item => item.id !== id));
          };

          const updateQuantity = (id, delta) => {
            setCart(prev => prev.map(item => {
              if (item.id === id) {
                const newQty = item.quantity + delta;
                return newQty > 0 ? { ...item, quantity: newQty } : item;
              }
              return item;
            }));
          };

          const cartTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
          const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);

          const formatPrice = (price) => {
            return new Intl.NumberFormat('es-AR', {
              style: 'currency',
              currency: 'ARS',
              minimumFractionDigits: 0
            }).format(price);
          };

          const handleWhatsAppCheckout = () => {
            if (cart.length === 0) return;

            const itemsList = cart.map(item => 
              `• ${item.quantity}x ${item.title} (${formatPrice(item.price * item.quantity)})`
            ).join('\n');

            const message = `Hola Almazara! ${customerName ? `Soy ${customerName}.` : ''} Quisiera realizar el siguiente pedido:\n\n${itemsList}\n\n*Total: ${formatPrice(cartTotal)}*`;
            
            const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
          };

          const scrollToProducts = () => {
            document.getElementById('products')?.scrollIntoView({ behavior: 'smooth' });
          };

          return (
            <div className="min-h-screen font-sans text-stone-900 selection:bg-olive-200">
              <Header cartCount={cartCount} onOpenCart={() => setIsCartOpen(true)} />

              {/* Cart Sidebar */}
              <div className={`fixed inset-0 z-50 transition-all duration-500 ${isCartOpen ? 'visible' : 'invisible'}`}>
                <div 
                  className={`absolute inset-0 bg-stone-900/60 backdrop-blur-sm transition-opacity duration-500 ${isCartOpen ? 'opacity-100' : 'opacity-0'}`}
                  onClick={() => setIsCartOpen(false)}
                />
                
                <div className={`absolute top-0 right-0 h-full w-full max-w-md bg-cream-50 shadow-2xl transform transition-transform duration-500 ease-out flex flex-col ${isCartOpen ? 'translate-x-0' : 'translate-x-full'}`}>
                  <div className="p-6 bg-white border-b border-stone-200 flex items-center justify-between">
                    <h2 className="font-serif text-xl font-bold tracking-widest text-stone-900">TU PEDIDO</h2>
                    <button onClick={() => setIsCartOpen(false)} className="text-stone-500 hover:text-stone-900 transition-colors">
                      <X size={24} />
                    </button>
                  </div>

                  <div className="flex-1 overflow-y-auto p-6 space-y-6">
                    {cart.length === 0 ? (
                      <div className="h-full flex flex-col items-center justify-center text-stone-400 opacity-60">
                        <ShoppingBag size={48} strokeWidth={1} className="mb-4" />
                        <p className="font-light tracking-wide text-stone-600">Tu carrito está vacío</p>
                      </div>
                    ) : (
                      cart.map(item => (
                        <div key={item.id} className="flex gap-4 bg-white p-4 rounded-lg shadow-md border border-stone-100">
                          <img src={item.image} alt={item.title} className="w-20 h-24 object-cover object-center rounded-sm" />
                          <div className="flex-1 flex flex-col justify-between">
                            <div>
                              <h4 className="font-serif font-medium text-stone-900 leading-tight mb-1">{item.title}</h4>
                              <p className="text-sm text-olive-700 font-bold">{formatPrice(item.price)}</p>
                            </div>
                            
                            <div className="flex items-center justify-between mt-2">
                              <div className="flex items-center gap-3 border border-stone-300 rounded-md px-2 py-1">
                                <button onClick={() => updateQuantity(item.id, -1)} className="text-stone-500 hover:text-stone-900">
                                  <Minus size={14} />
                                </button>
                                <span className="text-sm font-medium w-4 text-center">{item.quantity}</span>
                                <button onClick={() => updateQuantity(item.id, 1)} className="text-stone-500 hover:text-stone-900">
                                  <Plus size={14} />
                                </button>
                              </div>
                              <button onClick={() => removeFromCart(item.id)} className="text-red-400 hover:text-red-700 p-1">
                                <Trash2 size={16} />
                              </button>
                            </div>
                          </div>
                        </div>
                      ))
                    )}
                  </div>

                  {cart.length > 0 && (
                    <div className="p-6 bg-white border-t border-stone-200 space-y-4 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]">
                       <div className="relative z-0 w-full group mb-4">
                          <input 
                            type="text" 
                            value={customerName}
                            onChange={(e) => setCustomerName(e.target.value)}
                            className="block py-2.5 px-0 w-full text-sm text-stone-900 bg-transparent border-0 border-b border-stone-400 appearance-none focus:outline-none focus:ring-0 focus:border-olive-700 peer"
                            placeholder=" "
                          />
                          <label className="absolute text-sm text-stone-500 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-olive-700 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6 uppercase tracking-wider text-xs font-bold">
                            Tu Nombre (Opcional)
                          </label>
                        </div>

                      <div className="flex justify-between items-end border-b border-stone-200 pb-4">
                        <span className="text-sm font-medium text-stone-600 uppercase tracking-widest">Total Estimado</span>
                        <span className="text-2xl font-serif font-bold text-stone-900">{formatPrice(cartTotal)}</span>
                      </div>
                      <button 
                        onClick={handleWhatsAppCheckout}
                        className="w-full bg-stone-900 hover:bg-olive-800 text-white font-medium text-xs uppercase tracking-[0.2em] py-4 transition-all duration-300 flex items-center justify-center gap-2 hover:shadow-lg"
                      >
                        <Phone size={16} />
                        Enviar Pedido a WhatsApp
                      </button>
                    </div>
                  )}
                </div>
              </div>

              {/* Hero Section */}
              <section className="relative h-screen min-h-[600px] flex items-center justify-center overflow-hidden">
                <div className="absolute inset-0 z-0">
                  <img 
                    src="https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?q=80&w=2000&auto=format&fit=crop"
                    alt="Olivos" 
                    className="w-full h-full object-cover"
                  />
                  <div className="absolute inset-0 bg-stone-900/60"></div>
                  <div className="absolute inset-0 bg-gradient-to-t from-stone-900/90 via-transparent to-stone-900/40"></div>
                </div>

                <div className="relative z-10 text-center px-6 max-w-4xl mx-auto mt-16">
                  <span className="block text-olive-100 text-sm md:text-base tracking-[0.3em] uppercase mb-4 font-bold drop-shadow-md">
                    Excelencia & Tradición
                  </span>
                  <h2 className="text-5xl md:text-7xl font-serif text-white mb-6 drop-shadow-lg leading-tight">
                    El Arte del<br/> <span className="italic font-light">Aceite de Oliva</span>
                  </h2>
                  <p className="text-white/95 text-lg md:text-xl font-medium max-w-xl mx-auto mb-10 leading-relaxed font-serif drop-shadow-md">
                    Una selección curada de los mejores aceites vírgenes extra, llevados directamente desde la almazara hasta tu mesa.
                  </p>
                  <button 
                    onClick={scrollToProducts}
                    className="group bg-white/20 backdrop-blur-md border border-white/60 hover:bg-white hover:text-olive-900 text-white px-8 py-3 rounded-sm transition-all duration-500 uppercase tracking-widest text-xs font-bold shadow-lg"
                  >
                    Ver Colección
                  </button>
                </div>

                <div className="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce cursor-pointer text-white/80" onClick={scrollToProducts}>
                  <ChevronDown size={32} strokeWidth={1.5} />
                </div>
              </section>

              <main id="products" className="pt-24 pb-24 bg-cream-50 min-h-screen">
                <div className="text-center mb-20 px-6 max-w-2xl mx-auto">
                  <div className="w-12 h-[3px] bg-olive-700 mx-auto mb-8"></div>
                  <h3 className="font-serif text-4xl text-stone-900 mb-6 italic font-medium">
                    Nuestra Selección
                  </h3>
                  <p className="text-stone-700 font-normal text-lg leading-relaxed">
                    Cada botella cuenta una historia de tierra, sol y dedicación. Selecciona tus productos y completa tu pedido vía WhatsApp.
                  </p>
                </div>

                <div className="max-w-6xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-16 md:gap-8 mb-16">
                  {PRODUCTS.map(product => (
                    <ProductCard key={product.id} product={product} onAddToCart={addToCart} />
                  ))}
                </div>

                <div className="text-center">
                    <p className="text-xs uppercase tracking-widest text-stone-500 font-bold">Envíos a todo el país</p>
                </div>
              </main>

              <a 
                href={`https://wa.me/${WHATSAPP_NUMBER}`}
                target="_blank"
                rel="noreferrer"
                className="fixed bottom-8 right-8 z-40 bg-[#25D366] text-white p-4 rounded-full shadow-2xl hover:scale-110 hover:-translate-y-1 transition-all duration-300 group ring-4 ring-white/50"
                aria-label="Contactar por WhatsApp"
              >
                <Phone size={28} fill="white" className="relative z-10" />
              </a>

              <footer className="bg-stone-900 text-cream-100 py-16">
                <div className="max-w-4xl mx-auto text-center px-6">
                  <h2 className="text-2xl font-serif font-bold tracking-[0.2em] mb-8 text-white">ALMAZARA</h2>
                  <div className="flex justify-center gap-8 text-xs tracking-widest uppercase mb-12 text-stone-400">
                    <a href="#" className="hover:text-white transition-colors font-medium">Inicio</a>
                    <a href="#products" className="hover:text-white transition-colors font-medium">Productos</a>
                  </div>
                  <p className="text-[10px] text-stone-600 uppercase tracking-widest font-bold">
                    &copy; {new Date().getFullYear()} Almazara Online. Todos los derechos reservados.
                  </p>
                </div>
              </footer>
            </div>
          );
        }

        // Renderizado Final
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
